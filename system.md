# 単発予約システム要件定義

## 1. 目的

- 2025年8月8日～8月31日に実施するオンライン視覚探索実験向けの予約システム
- 単発実験の参加者（約30名以上）を効率的に募集・管理する

## 2. 全体仕様

- **期間**：2025年8月8日〜8月31日
- **予約枠**：毎日9:00〜21:00を1時間刻みで全枠一括生成（計12枠/日）
- **定員**：無制限（1枠あたり複数人予約OK）
- **公開／非公開切替**：管理画面で枠ごとに×（非公開）設定可能
- **アクセス制限**：URLを知る人のみ予約画面へアクセス可能

## 3. 参加者フロー

1. 予約ページにアクセス（共有URL）
2. 氏名・メールアドレス入力（必須）→ 登録完了
3. 公開中の枠一覧（テーブル形式）から希望枠を選択
4. 予約完了メール受信
   - メール内容：予約日時、準備事項、当日の注意点
5. 前日12:00にリマインドメール自動送信
6. キャンセル／変更：Web上で実施前日まで可
   - 当日の変更・キャンセルはシステム上で不可→管理者への直接連絡（メール or 電話）

## 4. 管理者機能

- **ダッシュボード**
  - 全枠一覧：日付・開始時刻・公開状態（トグル）
- **予約状況一覧**
  - テーブル：枠日時・予約者氏名・メールアドレス・予約日時
  - 【編集】【キャンセル】アクション
- **手動操作**
  - 予約の追加・変更・キャンセルを管理画面で実施可能

## 5. 通知要件

- **予約完了メール**
  - 送信タイミング：予約直後
  - 内容：予約日時、準備物、注意点
- **リマインドメール**
  - 送信タイミング：セッション前日12:00
  - 内容：再度案内（日時・注意事項）

## 6. データモデル（ER図）

```plaintext
+----------------+         +-------------------+         +------------------+
|     Slot       | 1     ∞ |    Reservation    | ∞     1 |   Participant    |
+----------------+---------+-------------------+---------+------------------+
| id (PK)        |         | id (PK)           |         | id (PK)          |
| date DATE      |         | slot_id (FK)      |         | name VARCHAR     |
| start_time TIME|         | participant_id(FK)|         | email VARCHAR    |
| is_available   |         | reserved_at DATETIME|      +------------------+
+----------------+         +-------------------+
```

## 7. テーブル定義サンプル

| テーブル名            | カラム名            | 型                                 | 備考       |
| ---------------- | --------------- | --------------------------------- | -------- |
| **slots**        | id              | INT PK AUTO\_INCREMENT            |          |
|                  | date            | DATE                              |          |
|                  | start\_time     | TIME                              |          |
|                  | is\_available   | BOOLEAN DEFAULT TRUE              | 公開／非公開切替 |
| **participants** | id              | INT PK AUTO\_INCREMENT            |          |
|                  | name            | VARCHAR(100) NOT NULL             |          |
|                  | email           | VARCHAR(255) NOT NULL UNIQUE      |          |
| **reservations** | id              | INT PK AUTO\_INCREMENT            |          |
|                  | slot\_id        | INT FOREIGN KEY → slots.id        |          |
|                  | participant\_id | INT FOREIGN KEY → participants.id |          |
|                  | reserved\_at    | DATETIME                          | 予約日時     |

## 8. 技術スタック

- フロントエンド：HTML, CSS, JavaScript（フレームワーク不使用）
- バックエンド：PHP
- データベース：MySQL
- メール送信：PHP mail等
- デプロイ：Heroku (JawsDB mysql)

